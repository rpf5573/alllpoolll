!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):"undefined"!=typeof exports?module.exports=e(require("jquery")):e(jQuery)}(function($){"namespace sumo";$.fn.SumoSelect=function(e){var t=$.extend({placeholder:"Select Here",csvDispCount:3,captionFormat:"{0} Selected",captionFormatAllSelected:"{0} all selected!",floatWidth:400,forceCustomRendering:!1,nativeOnDevice:["Android","BlackBerry","iPhone","iPad","iPod","Opera Mini","IEMobile","Silk"],outputAsCSV:!1,csvSepChar:",",okCancelInMulti:!1,isClickAwayOk:!1,triggerChangeCombined:!0,selectAll:!1,search:!1,searchText:"Search...",searchFn:function(e,t){return e.toLowerCase().indexOf(t.toLowerCase())<0},noMatch:'No matches for "{0}"',prefix:"",locale:["OK","Cancel","Select All"],up:!1,showTitle:!0},e),l=this.each(function(){var l=this;!this.sumo&&$(this).is("select")&&(this.sumo={E:$(l),is_multi:$(l).attr("multiple"),select:"",caption:"",placeholder:"",optDiv:"",CaptionCont:"",ul:"",is_floating:!1,is_opened:!1,mob:!1,Pstate:[],lastUnselected:null,createElems:function(){var e=this;if(e.E.wrap('<div class="SumoSelect" tabindex="0" role="button" aria-expanded="false">'),e.select=e.E.parent(),e.caption=$("<span>"),e.CaptionCont=$('<p class="CaptionCont SelectBox" ><label><i></i></label></p>').attr("style",e.E.attr("style")).prepend(e.caption),e.select.append(e.CaptionCont),e.is_multi||(t.okCancelInMulti=!1),e.E.attr("disabled")&&e.select.addClass("disabled").removeAttr("tabindex"),t.outputAsCSV&&e.is_multi&&e.E.attr("name")&&(e.select.append($('<input class="HEMANT123" type="hidden" />').attr("name",e.E.attr("name")).val(e.getSelStr())),e.E.removeAttr("name")),e.isMobile()&&!t.forceCustomRendering)return void e.setNativeMobile();e.E.attr("name")&&e.select.addClass("sumo_"+e.E.attr("name").replace(/\[\]/,"")),e.E.addClass("SumoUnder").attr("tabindex","-1"),e.optDiv=$('<div class="optWrapper '+(t.up?"up":"")+'">'),e.floatingList(),e.ul=$('<ul class="options">'),e.optDiv.append(e.ul),t.selectAll&&e.is_multi&&e.SelAll(),t.search&&e.Search(),e.ul.append(e.prepItems(e.E.children())),e.is_multi&&e.multiSelelect(),e.select.append(e.optDiv),e.basicEvents(),e.selAllState()},prepItems:function(e,t){var l=[],i=this;return $(e).each(function(e,n){n=$(n),l.push(n.is("optgroup")?$('<li class="group '+(n[0].disabled?"disabled":"")+'"><label>'+n.attr("label")+"</label><ul></ul></li>").find("ul").append(i.prepItems(n.children(),n[0].disabled)).end():i.createLi(n,t))}),l},createLi:function(e,t){var l=this;e.attr("value")||e.attr("value",e.val());var i=$('<li class="opt"><label>'+e.text()+"</label></li>");return i.data("opt",e),e.data("li",i),l.is_multi&&i.prepend("<span><i></i></span>"),(e[0].disabled||t)&&(i=i.addClass("disabled")),l.onOptClick(i),e[0].selected&&i.addClass("selected"),e.attr("class")&&i.addClass(e.attr("class")),e.attr("title")&&i.attr("title",e.attr("title")),i},getSelStr:function(){var e=[];return this.E.find("option:selected").each(function(){e.push($(this).val())}),e.join(t.csvSepChar)},multiSelelect:function(){var e=this;e.optDiv.addClass("multiple"),e.okbtn=$('<p tabindex="0" class="btnOk">'+t.locale[0]+"</p>").click(function(){e._okbtn(),e.hideOpts()}),e.cancelBtn=$('<p tabindex="0" class="btnCancel">'+t.locale[1]+"</p>").click(function(){e._cnbtn(),e.hideOpts()});var l=e.okbtn.add(e.cancelBtn);e.optDiv.append($('<div class="MultiControls">').append(l)),l.on("keydown.sumo",function(t){var l=$(this);switch(t.which){case 32:case 13:l.trigger("click");break;case 9:if(l.hasClass("btnOk"))return;case 27:return e._cnbtn(),void e.hideOpts()}t.stopPropagation(),t.preventDefault()})},_okbtn:function(){var e=this,l=0;t.triggerChangeCombined&&(e.E.find("option:selected").length!==e.Pstate.length?l=1:e.E.find("option").each(function(t,i){i.selected&&e.Pstate.indexOf(t)<0&&(l=1)}),l&&(e.callChange(),e.setText()))},_cnbtn:function(){var e=this;e.E.find("option:selected").each(function(){this.selected=!1}),e.optDiv.find("li.selected").removeClass("selected");for(var t=0;t<e.Pstate.length;t++)e.E.find("option")[e.Pstate[t]].selected=!0,e.ul.find("li.opt").eq(e.Pstate[t]).addClass("selected");e.selAllState()},SelAll:function(){var e=this;e.is_multi&&(e.selAll=$('<p class="select-all"><span><i></i></span><label>'+t.locale[2]+"</label></p>"),e.optDiv.addClass("selall"),e.selAll.on("click",function(){e.selAll.toggleClass("selected"),e.toggSelAll(e.selAll.hasClass("selected"),1)}),e.optDiv.prepend(e.selAll))},Search:function(){var l=this,i=l.CaptionCont.addClass("search"),n=$('<p class="no-match">'),a=e.searchFn&&"function"==typeof e.searchFn?e.searchFn:t.searchFn;l.ftxt=$('<input type="text" class="search-txt" value="" placeholder="'+t.searchText+'">').on("click",function(e){e.stopPropagation()}),i.append(l.ftxt),l.optDiv.children("ul").after(n),l.ftxt.on("keyup.sumo",function(){var e=l.optDiv.find("ul.options li.opt").each(function(e,t){var t=$(t),i=t.data("opt")[0];i.hidden=a(t.text(),l.ftxt.val()),t.toggleClass("hidden",i.hidden)}).not(".hidden");n.html(t.noMatch.replace(/\{0\}/g,"<em></em>")).toggle(!e.length),n.find("em").text(l.ftxt.val()),l.selAllState()})},selAllState:function(){var e=this;if(t.selectAll&&e.is_multi){var l=0,i=0;e.optDiv.find("li.opt").not(".hidden").each(function(e,t){$(t).hasClass("selected")&&l++,$(t).hasClass("disabled")||i++}),l===i?e.selAll.removeClass("partial").addClass("selected"):0===l?e.selAll.removeClass("selected partial"):e.selAll.addClass("partial")}},showOpts:function(){var e=this;if(!e.E.attr("disabled")){if(e.E.trigger("sumo:opening",e),e.is_opened=!0,e.select.addClass("open").attr("aria-expanded","true"),e.E.trigger("sumo:opened",e),e.ftxt?e.ftxt.focus():e.select.focus(),$(document).on("click.sumo",function(l){if(!e.select.is(l.target)&&0===e.select.has(l.target).length){if(!e.is_opened)return;e.hideOpts(),t.okCancelInMulti&&(t.isClickAwayOk?e._okbtn():e._cnbtn())}}),e.is_floating){var l=e.optDiv.children("ul").outerHeight()+2;e.is_multi&&(l+=parseInt(e.optDiv.css("padding-bottom"))),e.optDiv.css("height",l),$("body").addClass("sumoStopScroll")}e.setPstate()}},setPstate:function(){var e=this;e.is_multi&&(e.is_floating||t.okCancelInMulti)&&(e.Pstate=[],e.E.find("option").each(function(t,l){l.selected&&e.Pstate.push(t)}))},callChange:function(){this.E.trigger("change").trigger("click")},hideOpts:function(){var e=this;e.is_opened&&(e.E.trigger("sumo:closing",e),e.is_opened=!1,e.select.removeClass("open").attr("aria-expanded","true").find("ul li.sel").removeClass("sel"),e.E.trigger("sumo:closed",e),$(document).off("click.sumo"),e.select.focus(),$("body").removeClass("sumoStopScroll"),t.search&&(e.ftxt.val(""),e.ftxt.trigger("keyup.sumo")))},setOnOpen:function(){var e=this,l=e.optDiv.find("li.opt:not(.hidden)").eq(t.search?0:e.E[0].selectedIndex);l.hasClass("disabled")&&(l=l.next(":not(disabled)"),!l.length)||(e.optDiv.find("li.sel").removeClass("sel"),l.addClass("sel"),e.showOpts())},nav:function(e){var t=this,l,i=t.ul.find("li.opt:not(.disabled, .hidden)"),n=t.ul.find("li.opt.sel:not(.hidden)"),a=i.index(n);if(t.is_opened&&n.length){if(e&&a>0)l=i.eq(a-1);else{if(!(!e&&a<i.length-1&&a>-1))return;l=i.eq(a+1)}n.removeClass("sel"),n=l.addClass("sel");var s=t.ul,o=s.scrollTop(),c=n.position().top+o;c>=o+s.height()-n.outerHeight()&&s.scrollTop(c-s.height()+n.outerHeight()),c<o&&s.scrollTop(c)}else t.setOnOpen()},basicEvents:function(){var e=this;e.CaptionCont.click(function(t){e.E.trigger("click"),e.is_opened?e.hideOpts():e.showOpts(),t.stopPropagation()}),e.select.on("keydown.sumo",function(l){switch(l.which){case 38:e.nav(!0);break;case 40:e.nav(!1);break;case 65:if(e.is_multi&&l.ctrlKey){e.toggSelAll(!l.shiftKey,1);break}return;case 32:if(t.search&&e.ftxt.is(l.target))return;case 13:e.is_opened?e.optDiv.find("ul li.sel").trigger("click"):e.setOnOpen();break;case 9:return void(t.okCancelInMulti||e.hideOpts());case 27:return t.okCancelInMulti&&e._cnbtn(),void e.hideOpts();default:return}l.preventDefault()}),$(window).on("resize.sumo",function(){e.floatingList()})},onOptClick:function(e){var l=this;e.click(function(){var e=$(this);if(!e.hasClass("disabled")){var i="";l.is_multi?(e.toggleClass("selected"),e.data("opt")[0].selected=e.hasClass("selected"),!1===e.data("opt")[0].selected&&(l.lastUnselected=e.data("opt")[0].textContent),l.selAllState()):(e.parent().find("li.selected").removeClass("selected"),e.toggleClass("selected"),e.data("opt")[0].selected=!0),l.is_multi&&t.triggerChangeCombined&&(l.is_floating||t.okCancelInMulti)||(l.setText(),l.callChange()),l.is_multi||l.hideOpts()}})},setText:function(){var e=this;if(e.placeholder="",e.is_multi){for(var l=e.E.find(":selected").not(":disabled"),i=0;i<l.length;i++){if(i+1>=t.csvDispCount&&t.csvDispCount){l.length===e.E.find("option").length&&t.captionFormatAllSelected?e.placeholder=t.captionFormatAllSelected.replace(/\{0\}/g,l.length)+",":e.placeholder=t.captionFormat.replace(/\{0\}/g,l.length)+",";break}var n=l[i].innerHTML.replace(/[^\S]+/g,"");e.placeholder+=n+", "}e.placeholder=e.placeholder.replace(/,([^,]*)$/,"$1")}else{var n=e.E.find(":selected").not(":disabled")[0].replace(/[^\S]+/g,"");e.placeholder=n}var a=!1;e.placeholder||(a=!0,e.placeholder=e.E.attr("placeholder"),e.placeholder||(e.placeholder=e.E.find("option:disabled:selected").text())),e.placeholder=e.placeholder?t.prefix+" "+e.placeholder:t.placeholder,e.caption.html(e.placeholder),t.showTitle&&e.CaptionCont.attr("title",e.placeholder);var s=e.select.find("input.HEMANT123");return s.length&&s.val(e.getSelStr()),a?e.caption.addClass("placeholder"):e.caption.removeClass("placeholder"),e.placeholder},isMobile:function(){for(var e=navigator.userAgent||navigator.vendor||window.opera,l=0;l<t.nativeOnDevice.length;l++)if(e.toString().toLowerCase().indexOf(t.nativeOnDevice[l].toLowerCase())>0)return t.nativeOnDevice[l];return!1},setNativeMobile:function(){var e=this;e.E.addClass("SelectClass"),e.mob=!0,e.E.change(function(){e.setText()})},floatingList:function(){var e=this;e.is_floating=$(window).width()<=t.floatWidth,e.optDiv.toggleClass("isFloating",e.is_floating),e.is_floating||e.optDiv.css("height",""),e.optDiv.toggleClass("okCancelInMulti",t.okCancelInMulti&&!e.is_floating)},vRange:function(e){var t=this;if(t.E.find("option").length<=e||e<0)throw"index out of bounds";return t},toggSel:function(e,t){var l=this,i;"number"==typeof t?(l.vRange(t),i=l.E.find("option")[t]):i=l.E.find('option[value="'+t+'"]')[0]||0,i&&!i.disabled&&i.selected!==e&&(i.selected=e,l.mob||$(i).data("li").toggleClass("selected",e),l.callChange(),l.setPstate(),l.setText(),l.selAllState())},toggDis:function(e,t){var l=this.vRange(t);l.E.find("option")[t].disabled=e,e&&(l.E.find("option")[t].selected=!1),l.mob||l.optDiv.find("ul.options li").eq(t).toggleClass("disabled",e).removeClass("selected"),l.setText()},toggSumo:function(e){var t=this;return t.enabled=e,t.select.toggleClass("disabled",e),e?(t.E.attr("disabled","disabled"),t.select.removeAttr("tabindex")):(t.E.removeAttr("disabled"),t.select.attr("tabindex","0")),t},toggSelAll:function(e,t){var l=this;l.E.find("option:not(:disabled,:hidden)").each(function(t,l){var i=l.selected,l=$(l).data("li");l.hasClass("hidden")||(e?i||l.trigger("click"):i&&l.trigger("click"))}),t||(!l.mob&&l.selAll&&l.selAll.removeClass("partial").toggleClass("selected",!!e),l.callChange(),l.setText(),l.setPstate())},reload:function(){var e=this.unload();return $(e).SumoSelect(t)},unload:function(){var e=this;return e.select.before(e.E),e.E.show(),t.outputAsCSV&&e.is_multi&&e.select.find("input.HEMANT123").length&&e.E.attr("name",e.select.find("input.HEMANT123").attr("name")),e.select.remove(),delete l.sumo,l},add:function(e,t,i){if(void 0===e)throw"No value to add";var n=this,a=n.E.find("option");"number"==typeof t&&(i=t,t=e),void 0===t&&(t=e);var s=$("<option></option>").val(e).html(t);if(a.length<i)throw"index out of bounds";return void 0===i||a.length===i?(n.E.append(s),n.mob||n.ul.append(n.createLi(s))):(a.eq(i).before(s),n.mob||n.ul.find("li.opt").eq(i).before(n.createLi(s))),l},remove:function(e){var t=this.vRange(e);t.E.find("option").eq(e).remove(),t.mob||t.optDiv.find("ul.options li").eq(e).remove(),t.setText()},removeAll:function(){for(var e=this,t=e.E.find("option"),l=t.length-1;l>=0;l--)!0!==t[l].selected&&e.remove(l)},find:function(e){var t=this,l=t.E.find("option");for(var i in l)if(l[i].value===e)return parseInt(i);return-1},selectItem:function(e){this.toggSel(!0,e)},unSelectItem:function(e){this.toggSel(!1,e)},selectAll:function(){this.toggSelAll(!0)},unSelectAll:function(){this.toggSelAll(!1)},disableItem:function(e){this.toggDis(!0,e)},enableItem:function(e){this.toggDis(!1,e)},enabled:!0,enable:function(){return this.toggSumo(!1)},disable:function(){return this.toggSumo(!0)},init:function(){var e=this;return e.createElems(),e.setText(),e}},l.sumo.init())});return 1===l.length?l[0]:l}});